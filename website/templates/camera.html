{% extends "base.html" %}

{% block title %}Camera - eGrowtify{% endblock %}

{% block content %}
<div class="max-w-xl mx-auto">
    <div class="bg-white rounded-lg shadow-lg p-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
            <i class="fas fa-camera text-primary-600 mr-3"></i> Camera
        </h2>
        <div class="flex flex-col items-center mb-6">
            <div class="w-64 h-48 bg-gray-200 flex items-center justify-center rounded-lg mb-4">
                <i class="fas fa-video text-5xl text-gray-400"></i>
            </div>
            <p class="text-gray-500 mb-2">Camera feed placeholder</p>
        </div>
        <!-- Upload/Take Photo Section -->
        <div class="flex flex-col items-center mb-6 w-full">
            <!-- Upload for desktop, Take Photo for mobile -->
            <form id="photoForm" enctype="multipart/form-data" class="w-full flex flex-col items-center">
                <input type="file" id="uploadInput" name="photo" accept="image/*" class="hidden" />
                <button type="button" id="uploadBtn" class="bg-primary-600 hover:bg-primary-700 text-white font-medium py-3 px-6 rounded-md transition-colors flex items-center justify-center mb-2">
                    <i class="fas fa-upload mr-2"></i> Upload Photo
                </button>
                <button type="button" id="cameraBtn" class="bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-6 rounded-md transition-colors flex items-center justify-center mb-2 hidden">
                    <i class="fas fa-camera mr-2"></i> Take Photo
                </button>
                <span id="fileName" class="text-gray-500 text-sm mt-1"></span>
            </form>
        </div>
        <div class="flex flex-col md:flex-row gap-4 justify-center">
            <button class="bg-primary-600 hover:bg-primary-700 text-white font-medium py-3 px-6 rounded-md transition-colors flex items-center justify-center">
                <i class="fas fa-seedling mr-2"></i> Analyze Soil AI
            </button>
            <button class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-md transition-colors flex items-center justify-center">
                <i class="fas fa-leaf mr-2"></i> Identify Plant AI
            </button>
        </div>
    </div>
</div>
<script>
    // Show upload for desktop, camera for mobile
    function isMobile() {
        return /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
    }
    document.addEventListener('DOMContentLoaded', function() {
        const uploadBtn = document.getElementById('uploadBtn');
        const cameraBtn = document.getElementById('cameraBtn');
        const uploadInput = document.getElementById('uploadInput');
        const fileName = document.getElementById('fileName');
        if (isMobile()) {
            uploadBtn.classList.add('hidden');
            cameraBtn.classList.remove('hidden');
            cameraBtn.onclick = function() {
                uploadInput.setAttribute('capture', 'environment');
                uploadInput.click();
            };
        } else {
            cameraBtn.classList.add('hidden');
            uploadBtn.classList.remove('hidden');
            uploadBtn.onclick = function() {
                uploadInput.removeAttribute('capture');
                uploadInput.click();
            };
        }
        uploadInput.onchange = function() {
            if (uploadInput.files.length > 0) {
                fileName.textContent = uploadInput.files[0].name;
            } else {
                fileName.textContent = '';
            }
        };
    });
</script>
{% endblock %} 